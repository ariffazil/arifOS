[build]
builder = "nixpacks"
buildCommand = "pip install -e ."

[deploy]
startCommand = "sh -c 'uvicorn arifos.core.integration.api.app:app --host 0.0.0.0 --port ${PORT:-8000} --workers 1'"
healthcheckPath = "/health"
healthcheckTimeout = 120
restartPolicyType = "ON_FAILURE"
numReplicas = 1

# Note: Railway uses PORT env var for healthchecks
# Healthcheck hostname: healthcheck.railway.app (allowed by default in FastAPI)
# See: https://docs.railway.com/guides/healthchecks
