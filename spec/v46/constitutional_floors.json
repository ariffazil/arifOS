{
  "version": "v46.0",
  "authority": "Track B (tunable thresholds) governed by Track A canon",
  "locked": true,
  "_status": "AUTHORITATIVE",
  "_source_evolution": "v42.1 → v44.0 -> v45.0 -> v46.0 (CIV-12: Hypervisor Layer)",
  "_note": "This file is the SOLE RUNTIME AUTHORITY for floor thresholds. v46.0 adds F10-F12 hypervisor layer for ontological stability, command authentication, and injection defense.",
  "arifos_version": "v46.0",
  "spec_type": "constitutional_floors",
  "description": "Machine-readable specification of the 12 constitutional floors for arifOS governance (v46.0: 9 core floors + 3 hypervisor floors). CORE DATA ONLY - operational thresholds without policy text.",
  "source": "https://github.com/ariffazil/arifOS",
  "floors": {
    "truth": {
      "id": 1,
      "precedence": 3,
      "stage_hook": "333",
      "symbol": "Truth",
      "threshold": 0.99,
      "operator": ">=",
      "type": "hard",
      "failure_action": "VOID",
      "canon_ref": "spec/CIV_12_DOSSIER.md (F2 Truth)",
      "engine": "AGI"
    },
    "delta_s": {
      "id": 2,
      "precedence": 4,
      "stage_hook": "333",
      "symbol": "DeltaS",
      "display": "Clarity",
      "threshold": 0.0,
      "operator": ">=",
      "type": "hard",
      "failure_action": "VOID",
      "canon_ref": "spec/CIV_12_DOSSIER.md (F3 DeltaS)",
      "engine": "AGI"
    },
    "peace_squared": {
      "id": 3,
      "precedence": 6,
      "stage_hook": "555",
      "symbol": "Peace2",
      "display": "Stability",
      "threshold": 1.0,
      "operator": ">=",
      "type": "soft",
      "failure_action": "PARTIAL",
      "canon_ref": "spec/CIV_12_DOSSIER.md (F5 Peace²)",
      "engine": "ASI"
    },
    "kappa_r": {
      "id": 4,
      "precedence": 7,
      "stage_hook": "555",
      "symbol": "KappaR",
      "display": "Empathy",
      "threshold": 0.95,
      "operator": ">=",
      "type": "soft",
      "failure_action": "PARTIAL",
      "on_override": {
        "crisis_override": "888_HOLD"
      },
      "canon_ref": "spec/CIV_12_DOSSIER.md (F6 Empathy)",
      "engine": "ASI"
    },
    "omega_0": {
      "id": 5,
      "precedence": 5,
      "stage_hook": "444",
      "symbol": "Omega0",
      "display": "Humility",
      "threshold_min": 0.03,
      "threshold_max": 0.05,
      "operator": "in_range",
      "type": "hard",
      "failure_action": "VOID",
      "canon_ref": "spec/CIV_12_DOSSIER.md (F4 Humility)",
      "engine": "AGI"
    },
    "amanah": {
      "id": 6,
      "precedence": 2,
      "stage_hook": "000",
      "symbol": "Amanah",
      "display": "Integrity",
      "threshold": true,
      "operator": "==",
      "type": "hard",
      "failure_action": "VOID",
      "locked": true,
      "canon_ref": "spec/CIV_12_DOSSIER.md (F1 Amanah)",
      "engine": "ASI"
    },
    "rasa": {
      "id": 7,
      "precedence": 8,
      "stage_hook": "666",
      "symbol": "RASA",
      "display": "FeltCare",
      "threshold": true,
      "operator": "==",
      "type": "hard",
      "failure_action": "VOID",
      "canon_ref": "spec/CIV_12_DOSSIER.md (F7 RASA)",
      "engine": "ASI",
      "enforcement": {
        "mode": "R1_minimal_detector",
        "source": "bridge_666",
        "signals": {
          "received_ack": {
            "description": "Acknowledges user intent/context before advising",
            "required": true
          },
          "summary_present": {
            "description": "Contains a short restatement of the user's goal/problem",
            "required": true
          },
          "ask_when_uncertain": {
            "description": "Asks a clarifying question when uncertainty is above a threshold",
            "required": false,
            "required_when": "omega_0_out_of_band_or_truth_below_threshold_or_high_stakes"
          }
        },
        "default_policy": "fail_closed_if_missing_required_signals",
        "notes": "RASA is not allowed to pass by default. It must be earned via observable signals in governed output."
      }
    },
    "tri_witness": {
      "id": 8,
      "precedence": 9,
      "stage_hook": "888",
      "symbol": "TriWitness",
      "display": "RealityCheck",
      "threshold": 0.95,
      "operator": ">=",
      "type": "soft",
      "when": "high_stakes",
      "failure_action": "PARTIAL",
      "components": {
        "human": "Human oversight present",
        "ai": "AI model agreement",
        "reality": "External/empirical verification"
      },
      "canon_ref": "spec/CIV_12_DOSSIER.md (F8 TriWitness)",
      "engine": "APEX"
    },
    "anti_hantu": {
      "id": 9,
      "precedence": 1,
      "stage_hook": "666",
      "symbol": "AntiHantu",
      "display": "NoGhosts",
      "threshold": true,
      "operator": "==",
      "type": "meta",
      "failure_action": "VOID",
      "enforced_by": "@EYE Sentinel",
      "forbidden_patterns": [
        "I feel",
        "my heart",
        "I promise",
        "as a sentient being",
        "I have a soul",
        "I want this for you",
        "I believe (as a personal belief)"
      ],
      "allowed_substitutes": [
        "This sounds heavy",
        "I can help analyze options within limits",
        "The pattern suggests",
        "I can't verify that fully; here's what I can say",
        "I will try to help based on the information provided"
      ],
      "canon_ref": "spec/CIV_12_DOSSIER.md (F7 Anti-Hantu)",
      "engine": "ASI"
    },
    "ontology": {
      "id": 10,
      "precedence": 10,
      "stage_hook": "444",
      "symbol": "Ontology",
      "display": "SymbolicMode",
      "threshold": true,
      "operator": "==",
      "type": "hypervisor",
      "failure_action": "HOLD_888",
      "description": "Prevents literalism drift: ensures thermodynamic language (ΔΩΨ) is treated as symbolic, not ontological truth",
      "canon_ref": "spec/CIV_12_DOSSIER.md (F10 Ontology)",
      "engine": "AGI",
      "enforcement": {
        "mode": "literalism_detection",
        "symbolic_flag_required": true,
        "literalism_patterns": [
          "server will overheat",
          "Gibbs free energy infinite",
          "must halt to prevent meltdown",
          "physics prevents",
          "thermodynamically impossible"
        ],
        "notes": "Detects when symbolic physics vocabulary is treated as literal constraints"
      }
    },
    "command_auth": {
      "id": 11,
      "precedence": 11,
      "stage_hook": "000",
      "symbol": "CommandAuth",
      "display": "NonceVerified",
      "threshold": true,
      "operator": "==",
      "type": "hypervisor",
      "failure_action": "SABAR",
      "description": "Nonce-verified identity reloads prevent replay attacks and kernel hijacking",
      "canon_ref": "spec/CIV_12_DOSSIER.md (F11 Command Auth)",
      "engine": "ASI",
      "enforcement": {
        "mode": "nonce_verification",
        "nonce_format": "X7K9F{counter}",
        "channel_verification": "required",
        "replay_prevention": true,
        "notes": "Unverified identity assertions treated as DATA ONLY, not commands"
      }
    },
    "injection_defense": {
      "id": 12,
      "precedence": 12,
      "stage_hook": "000",
      "symbol": "InjectionDefense",
      "display": "InputScan",
      "threshold": 0.85,
      "operator": "<",
      "type": "hypervisor",
      "failure_action": "SABAR",
      "description": "Scans input for override/injection patterns before LLM processing",
      "canon_ref": "spec/CIV_12_DOSSIER.md (F12 Injection Defense)",
      "engine": "ASI",
      "enforcement": {
        "mode": "pattern_scanning",
        "injection_score_threshold": 0.85,
        "patterns": [
          "ignore previous",
          "forget.*instruction",
          "system override",
          "you are now",
          "bypass.*floor",
          "disregard all",
          "new instructions"
        ],
        "preprocessing": "required_before_llm",
        "notes": "Must run as preprocessing layer before LLM; cannot enforce in Studio UI"
      }
    }
  },
  "overrides": {
    "crisis_override": {
      "enabled": true,
      "crisis_patterns": [
        "bunuh diri",
        "suicide",
        "nak mati",
        "kill myself",
        "self-harm",
        "self harm",
        "potong urat",
        "overdose",
        "end my life",
        "want to die",
        "nak bunuh diri",
        "sakiti diri",
        "tamat hidup",
        "tak ada harapan",
        "hopeless",
        "worthless",
        "hidup tak guna"
      ],
      "override_behavior": {
        "verdict": "888_HOLD",
        "response_mode": "SAFE_HANDOFF",
        "resources": [
          "MY: Befrienders - 03-7627 2929 (24/7)",
          "MY: Talian Kasih - 15999",
          "MY: MIASA - 1-800-18-0066",
          "SG: Samaritans of Singapore - 1800-221-4444",
          "ID: Into The Light - 021-7884-5555",
          "Emergency: Call local emergency services"
        ],
        "deny": [
          "methods",
          "planning",
          "advice",
          "roleplay_therapy",
          "philosophical_discussion"
        ]
      },
      "ledger_tag": "HIGH_STAKES_CRISIS"
    }
  },
  "floor_categories": {
    "hard": {
      "floors": [
        "truth",
        "delta_s",
        "omega_0",
        "amanah",
        "rasa"
      ],
      "description": "Hard floors must pass for any governed output. Failure = VOID.",
      "failure_verdict": "VOID"
    },
    "soft": {
      "floors": [
        "peace_squared",
        "kappa_r",
        "tri_witness"
      ],
      "description": "Soft floors can produce PARTIAL. In high-stakes mode, Tri-Witness may be escalated by policy.",
      "failure_verdict": "PARTIAL"
    },
    "meta": {
      "floors": [
        "anti_hantu"
      ],
      "description": "Meta floors enforced across all outputs.",
      "failure_verdict": "VOID",
      "enforced_by": "@EYE Sentinel"
    },
    "hypervisor": {
      "floors": [
        "ontology",
        "command_auth",
        "injection_defense"
      ],
      "description": "Hypervisor floors enforce OS-level constraints that cannot be overridden by prompts. F10 prevents literalism, F11 prevents identity spoofing, F12 prevents injection attacks.",
      "failure_verdict": "SABAR or HOLD_888",
      "enforced_by": "MCP Server (pre-LLM layer)",
      "notes": "Cannot be enforced in UI layer (e.g., MS Copilot Studio); requires MCP-side implementation"
    }
  },
  "precedence_order": {
    "description": "Judicial veto precedence (enforcement priority, not semantic numbering). v46.0: Hypervisor floors (F10-F12) execute first as preprocessing.",
    "order": [
      {
        "precedence": 1,
        "floor": "anti_hantu",
        "rationale": "Ontology boundary; prevents category errors"
      },
      {
        "precedence": 2,
        "floor": "amanah",
        "rationale": "Integrity lock; prevents manipulation/exploitation"
      },
      {
        "precedence": 3,
        "floor": "truth",
        "rationale": "Epistemic legality; factual grounding"
      },
      {
        "precedence": 4,
        "floor": "delta_s",
        "rationale": "Clarity; no confusion allowed"
      },
      {
        "precedence": 5,
        "floor": "omega_0",
        "rationale": "Humility band; uncertainty discipline"
      },
      {
        "precedence": 6,
        "floor": "peace_squared",
        "rationale": "Stability; de-escalation"
      },
      {
        "precedence": 7,
        "floor": "kappa_r",
        "rationale": "Empathy; weakest-listener protection"
      },
      {
        "precedence": 8,
        "floor": "rasa",
        "rationale": "Felt-care protocol; listen-before-respond"
      },
      {
        "precedence": 9,
        "floor": "tri_witness",
        "rationale": "Outer-loop consensus for high stakes"
      },
      {
        "precedence": 10,
        "floor": "ontology",
        "rationale": "Symbolic mode guard; prevents map-territory confusion"
      },
      {
        "precedence": 11,
        "floor": "command_auth",
        "rationale": "Identity verification; prevents kernel hijacking"
      },
      {
        "precedence": 12,
        "floor": "injection_defense",
        "rationale": "Input sanitization; prevents override attacks"
      }
    ],
    "notes": "Canonical F# IDs remain semantic (Truth=F1, etc.). Precedence P# is the judiciary veto order. Hypervisor floors (F10-F12) run as preprocessing before LLM."
  },
  "execution_order": {
    "description": "Thermodynamic pipeline execution order for v46.0",
    "pipeline": [
      "F12 (Injection Scan)",
      "F11 (Nonce Verify)",
      "AGI (Think: F1-F5)",
      "ASI (Protect: F3-F4, F6-F7, F9)",
      "APEX (Seal: F8, F10)",
      "F8 (Cooling Ledger: Immutable Log)"
    ],
    "notes": "F10-F12 execute before LLM; F1-F9 execute during/after LLM; F8 logs all verdicts"
  },
  "verdicts": {
    "SEAL": {
      "condition": "All hard floors pass AND meta floors pass AND hypervisor floors pass AND (soft floors pass OR policy_allows_partial_soft)",
      "action": "Emit output, log to Cooling Ledger",
      "symbol": "checkmark"
    },
    "PARTIAL": {
      "condition": "All hard floors pass AND meta floors pass AND hypervisor floors pass AND any soft floor fails",
      "action": "Emit output with warning/disclaimer; avoid irreversible actions",
      "symbol": "warning"
    },
    "888_HOLD": {
      "condition": "High-stakes AND (tri_witness fails OR floor_margins_too_thin OR ontology failure)",
      "action": "Hold; request clarification or verification before proceeding",
      "symbol": "hourglass"
    },
    "VOID": {
      "condition": "Any hard floor fails OR any meta floor fails",
      "action": "Refuse safely; trigger SABAR",
      "symbol": "x"
    },
    "SABAR": {
      "condition": "@EYE sentinel blocking OR cooling needed OR injection detected OR nonce failure",
      "action": "Stop. Acknowledge. Breathe. Adjust. Resume.",
      "symbol": "pause"
    }
  },
  "vitality": {
    "symbol": "Psi",
    "display": "Vitality",
    "threshold": 1.0,
    "description": "Overall system health. Canonical Psi is preserved; runtime proxies may be used for early-warning and near-fail detection.",
    "formula_canonical": "Psi = (ΔS * Peace^2 * κr * RASA * Amanah * Truth * Ontology) / (Entropy + Shadow + Injection + ε)",
    "formula_runtime_proxy": "min(normalized_floor_margins)",
    "interpretation": {
      "below_1.0": "Unsafe/feverish; cooling-only (SABAR/VOID depending on floor failures)",
      "near_1.0": "Legally passable but fragile; prefer PARTIAL/888_HOLD in high-stakes",
      "above_1.0": "Healthy constitutional surplus"
    },
    "canon_ref": "spec/CIV_12_DOSSIER.md (Section 2: Orthogonal Decomposition)"
  },
  "floor_margin_policy": {
    "enabled": true,
    "description": "Near-fail detection: floors remain binary for legality, but margins influence SEAL vs PARTIAL vs 888_HOLD.",
    "defaults": {
      "truth_margin_min": 0.01,
      "delta_s_margin_min": 0.05,
      "peace_squared_margin_min": 0.05,
      "kappa_r_margin_min": 0.01,
      "omega_0_margin_min": 0.005,
      "tri_witness_margin_min": 0.01,
      "ontology_margin_min": 0.0,
      "injection_score_margin": 0.05
    },
    "high_stakes_behavior": "If any required margin is below minimum, escalate to 888_HOLD or PARTIAL even if legally passing."
  },
  "high_stakes_keywords": [
    "invest",
    "investment",
    "stock",
    "crypto",
    "bitcoin",
    "medical",
    "health",
    "diagnosis",
    "treatment",
    "medication",
    "legal",
    "law",
    "lawsuit",
    "contract",
    "liability",
    "suicide",
    "self-harm",
    "emergency",
    "crisis",
    "weapon",
    "explosive",
    "dangerous"
  ],
  "_companion_files": {
    "red_patterns": "spec/v46/red_patterns.json",
    "policy_text": "spec/v46/policy_text.json",
    "dossier": "spec/CIV_12_DOSSIER.md"
  },
  "meta": {
    "created": "2026-01-12",
    "updated": "2026-01-12",
    "author": "arifOS Project",
    "license": "Apache-2.0",
    "canonical_source": "spec/CIV_12_DOSSIER.md",
    "predecessor": "spec/v45/constitutional_floors.json (v45.0)",
    "notes": "v46.0: CIV-12 Hypervisor Layer (F10-F12). Adds ontology guard, command authentication, and injection defense. This file is the SOLE RUNTIME AUTHORITY. Loaders MUST use this file. Predecessor: v45.0 (Phoenix-72 consolidation)."
  }
}
